<html><head>
<link rel="stylesheet" type="text/css" href="https://categoricaldata.net/css/simple.css" /></head><body><h1>example ForeignKeys</h1><pre>
typeside Ty = empty

schema University = literal : Ty {
	entities
		Professor Student Department
 	foreign_keys
		worksIn    : Professor -&gt; Department
		majoringIn : Student -&gt; Department	
} 

schema AdvisorMatches = literal : Ty {
	imports
		University
	entities
		Match
 	foreign_keys
		studentOf : Match -&gt; Student
		professorOf : Match -&gt; Professor
	path_equations
		Match.studentOf.majoringIn = Match.professorOf.worksIn
} 

query findMatches = literal : University -&gt; AdvisorMatches {
 entity
	Department -&gt; {from dept:Department}
entity		
	Professor -&gt; {from prof:Professor foreign_keys worksIn -&gt; {dept -&gt; prof.worksIn}}
entity
	Student -&gt; {from stu:Student foreign_keys majoringIn -&gt; {dept -&gt; stu.majoringIn}}


/* When 
 * 
 *   where p.worksIn = s.majoringIn 
 *   
 * is commented out the query is rejected: 
 *   
 *   Error in query findMatches: 
 *     Target equation v.studentOf.majoringIn = v.professorOf.worksIn not respected: 
 *       transforms to s.majoringIn = p.worksIn, which is not provable in the sub-query for Match.
 */entity  Match -&gt; {from p:Professor s:Student 
		     where p.worksIn = s.majoringIn
		     foreign_keys professorOf -&gt; {prof -&gt; p}		
			studentOf -&gt; {stu -&gt; s}
		     } 
	
	

	
/* Disabling the equation validator will cause a runtime error when this query is executed:
 * 
 *   Error in instance MatchesForUnivX : Algebra does not satisfy equation  
 *     forall v. v.studentOf.majoringIn = v.professorOf.worksIn 
 *       on ID &lt;Match p:[Euler],s:[Kleene]&gt;
 */ /* options
	    dont_validate_unsafe=true */

} 

 
instance UniversityOfX = literal : University {
	generators
		Gauss Church Euler : Professor
		Riemann Turing Kleene : Student
		math cs : Department
	multi_equations
		worksIn -&gt; {Gauss math, Church cs, Euler math}
		majoringIn -&gt; {Riemann math, Turing cs, Kleene cs}		
}

instance MatchesForUnivX = eval findMatches UniversityOfX
</pre> Keywords:<br/></br>			<a href="schemaschema_literal.html" >schema_literal</a><br />
			<a href="queryquery_literal.html" >query_literal</a><br />
			<a href="typesideempty.html" >empty</a><br />
			<a href="instanceeval.html" >eval</a><br />
			<a href="instanceinstance_literal.html" >instance_literal</a><br />
<br/>Options:<br/></br>
<br/></br>
<hr/><h3>instance MatchesForUnivX</h3><div><table id="table362" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Department</b></caption><tr><th onclick="sortTable('table362', 0)">ID</th></tr><tr><td>0</td></tr><tr><td>1</td></tr></table><table id="table363" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Match</b></caption><tr><th onclick="sortTable('table363', 0)">ID</th><th onclick="sortTable('table363', 1)">professorOf</th><th onclick="sortTable('table363', 2)">studentOf</th></tr><tr><td>2</td><td>6</td><td>9</td></tr><tr><td>3</td><td>7</td><td>10</td></tr><tr><td>4</td><td>8</td><td>10</td></tr><tr><td>5</td><td>6</td><td>11</td></tr></table><table id="table364" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Professor</b></caption><tr><th onclick="sortTable('table364', 0)">ID</th><th onclick="sortTable('table364', 1)">worksIn</th></tr><tr><td>6</td><td>0</td></tr><tr><td>7</td><td>1</td></tr><tr><td>8</td><td>1</td></tr></table><table id="table365" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Student</b></caption><tr><th onclick="sortTable('table365', 0)">ID</th><th onclick="sortTable('table365', 1)">majoringIn</th></tr><tr><td>9</td><td>0</td></tr><tr><td>10</td><td>1</td></tr><tr><td>11</td><td>0</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance UniversityOfX</h3><div><table id="table366" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Department</b></caption><tr><th onclick="sortTable('table366', 0)">ID</th></tr><tr><td>0</td></tr><tr><td>1</td></tr></table><table id="table367" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Professor</b></caption><tr><th onclick="sortTable('table367', 0)">ID</th><th onclick="sortTable('table367', 1)">worksIn</th></tr><tr><td>2</td><td>0</td></tr><tr><td>3</td><td>1</td></tr><tr><td>4</td><td>1</td></tr></table><table id="table368" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Student</b></caption><tr><th onclick="sortTable('table368', 0)">ID</th><th onclick="sortTable('table368', 1)">majoringIn</th></tr><tr><td>5</td><td>0</td></tr><tr><td>6</td><td>1</td></tr><tr><td>7</td><td>0</td></tr></table></div><br style="clear:both;"/></body></html>