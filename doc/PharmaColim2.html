<html><head>
<link rel="stylesheet" type="text/css" href="https://categoricaldata.net/css/simple.css" /></head><body><h1>example PharmaColim2</h1><pre>
schema S1 = literal : sql {
	entities 
		Observation Person Gender ObsType 
	foreign_keys 
		f: Observation -&gt; Person
		h: Person -&gt; Gender
		g: Observation -&gt; ObsType
	attributes	
	     att: Person -&gt; String
	     att: Gender -&gt; String
	     att: ObsType -&gt; String
} 

schema S2 = literal : sql {
	entities 
		Observation Patient Method Type
	foreign_keys 
		f : Observation -&gt; Patient
		g1: Observation -&gt; Method
		g2: Method -&gt; Type
	attributes
	     att: Patient -&gt; String
	     att: Type -&gt; String
}


///////////////////////////////////////////////////////////////////////////
//compute the canonical schema colimit

schema_colimit ColimAuto = quotient S1 + S2 : sql {
	entity_equations
		S1.Observation = S2.Observation
		S1.Person = S2.Patient
		S1.ObsType = S2.Type
	path_equations
		Observation.S1_Observation_f = Observation.S2_Observation_f
		Observation.g = Observation.g1.g2
	options
		simplify_names = true	
}


//just for fun
schema_colimit Coproduct = coproduct S1 + S2 : sql 

///////////////////////////////////////////////////////////////////////////
//use a different, less verbose colimit constructed manually

schema_colimit Colim = modify ColimAuto {
	rename entities
		Observation -&gt; O
//		Patient__Person -&gt; P  done because of shorted prefix!
		ObsType__Type -&gt; T
		Gender -&gt; G
		Method -&gt; M
 	rename foreign_keys
		O.S1_Observation_f -&gt; f
	rename attributes
		T.ObsType_att  -&gt; T_att1
		//G.Gender_att  -&gt; G_att
		P.Person_att -&gt; P_att1
		T.Type_att  -&gt; T_att2
		P.Patient_att -&gt; P_att2
	remove foreign_keys	
		O.S2_Observation_f  -&gt; f
		O.g  -&gt; g1.g2 
	/* e.g. remove attributes
		B_att -&gt; lambda x. x.T_att1 */
}


///////////////////////////////////////////////////////////////////////////

instance I1 = literal : S1 {
	generators
		one two three : Observation
		Peter Paul : Person
	    	M F :Gender
	    	BloodPressure BodyWeight HeartRate: ObsType
	equations
		Peter.att = xPeter Paul.att = xPaul
		M.att = xM F.att = xF
		BloodPressure.att = xBloodPressure
		BodyWeight.att = xBodyWeight
		HeartRate.att = xHeartRate
		one.f = Peter two.f = Peter three.f = Paul
		Peter.h = M Paul.h = M
		one.g = BloodPressure two.g = BodyWeight three.g = HeartRate
} 

instance I2 = literal : S2 {
	generators
		o1 o2 o3 o4 : Observation
		Pete Jane : Patient
		m1 m2 m3 m4 : Method
		BP Wt : Type
	equations
	     Pete.att = xPete Jane.att = xJane
	     BP.att = xBloodPressure Wt.att = xBodyWeight
	     o1.f = Pete o2.f = Pete o3.f = Jane o4.f = Jane
	     o1.g1 = m1 o2.g1 = m2 o3.g1 = m3 o4.g1 = m1
	     m1.g2 = BP m2.g2 = BP m3.g2 = Wt m4.g2 = Wt
} 

instance I1Fwd = sigma (getMapping Colim S1) I1 
instance I2Fwd = sigma (getMapping Colim S2) I2 
instance CoProd = literal : getSchema Colim {
	imports I1Fwd I2Fwd
}

instance E = literal : getSchema Colim {
	generators 
	  	P : P 
	  	B W : T
} 

transform a1 = literal : E -&gt; CoProd {
		generators 
			P -&gt; Peter
			B -&gt; BloodPressure
			W -&gt; BodyWeight
} 

transform a2 = literal : E -&gt; CoProd {
		generators
			P -&gt; Pete
			B -&gt; BP 
			W -&gt; Wt
} 

instance answer = coequalize a1 a2
</pre> Keywords:<br/></br>			<a href="schema_colimitmodify.html" >modify</a><br />
			<a href="schemaschema_literal.html" >schema_literal</a><br />
			<a href="schema_colimitquotient.html" >quotient</a><br />
			<a href="instancesigma.html" >sigma</a><br />
			<a href="instanceinstance_literal.html" >instance_literal</a><br />
			<a href="instancecoequalize.html" >coequalize</a><br />
			<a href="transformtransform_literal.html" >transform_literal</a><br />
<br/>Options:<br/></br><a href="simplify_names.html" >simplify_names</a><br/>

<br/></br>
<hr/><h3>instance answer</h3><div><table id="table446" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>G</b></caption><tr><th onclick="sortTable('table446', 0)">ID</th><th onclick="sortTable('table446', 1)">att</th></tr><tr><td>0</td><td>xM</td></tr><tr><td>1</td><td>?0</td></tr><tr><td>2</td><td>xF</td></tr></table><table id="table447" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>M</b></caption><tr><th onclick="sortTable('table447', 0)">ID</th><th onclick="sortTable('table447', 1)">g2</th></tr><tr><td>3</td><td>22</td></tr><tr><td>4</td><td>22</td></tr><tr><td>5</td><td>22</td></tr><tr><td>6</td><td>20</td></tr><tr><td>7</td><td>20</td></tr><tr><td>8</td><td>21</td></tr><tr><td>9</td><td>20</td></tr></table><table id="table448" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>O</b></caption><tr><th onclick="sortTable('table448', 0)">ID</th><th onclick="sortTable('table448', 1)">f</th><th onclick="sortTable('table448', 2)">g1</th></tr><tr><td>10</td><td>17</td><td>4</td></tr><tr><td>11</td><td>17</td><td>5</td></tr><tr><td>12</td><td>18</td><td>3</td></tr><tr><td>13</td><td>17</td><td>3</td></tr><tr><td>14</td><td>17</td><td>6</td></tr><tr><td>15</td><td>19</td><td>8</td></tr><tr><td>16</td><td>18</td><td>9</td></tr></table><table id="table449" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>P</b></caption><tr><th onclick="sortTable('table449', 0)">ID</th><th onclick="sortTable('table449', 1)">P_att1</th><th onclick="sortTable('table449', 2)">P_att2</th><th onclick="sortTable('table449', 3)">h</th></tr><tr><td>17</td><td>xPeter</td><td>xPete</td><td>0</td></tr><tr><td>18</td><td>?1</td><td>xJane</td><td>1</td></tr><tr><td>19</td><td>xPaul</td><td>?2</td><td>0</td></tr></table><table id="table450" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>T</b></caption><tr><th onclick="sortTable('table450', 0)">ID</th><th onclick="sortTable('table450', 1)">T_att1</th><th onclick="sortTable('table450', 2)">T_att2</th></tr><tr><td>20</td><td>xBodyWeight</td><td>xBodyWeight</td></tr><tr><td>21</td><td>xHeartRate</td><td>?3</td></tr><tr><td>22</td><td>xBloodPressure</td><td>xBloodPressure</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance I2Fwd</h3><div><table id="table451" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>G</b></caption><tr><th onclick="sortTable('table451', 0)">ID</th><th onclick="sortTable('table451', 1)">att</th></tr><tr><td>0</td><td>?0</td></tr><tr><td>1</td><td>?1</td></tr></table><table id="table452" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>M</b></caption><tr><th onclick="sortTable('table452', 0)">ID</th><th onclick="sortTable('table452', 1)">g2</th></tr><tr><td>2</td><td>12</td></tr><tr><td>3</td><td>12</td></tr><tr><td>4</td><td>13</td></tr><tr><td>5</td><td>13</td></tr></table><table id="table453" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>O</b></caption><tr><th onclick="sortTable('table453', 0)">ID</th><th onclick="sortTable('table453', 1)">f</th><th onclick="sortTable('table453', 2)">g1</th></tr><tr><td>6</td><td>10</td><td>3</td></tr><tr><td>7</td><td>11</td><td>2</td></tr><tr><td>8</td><td>10</td><td>2</td></tr><tr><td>9</td><td>11</td><td>5</td></tr></table><table id="table454" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>P</b></caption><tr><th onclick="sortTable('table454', 0)">ID</th><th onclick="sortTable('table454', 1)">P_att1</th><th onclick="sortTable('table454', 2)">P_att2</th><th onclick="sortTable('table454', 3)">h</th></tr><tr><td>10</td><td>?2</td><td>xPete</td><td>0</td></tr><tr><td>11</td><td>?3</td><td>xJane</td><td>1</td></tr></table><table id="table455" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>T</b></caption><tr><th onclick="sortTable('table455', 0)">ID</th><th onclick="sortTable('table455', 1)">T_att1</th><th onclick="sortTable('table455', 2)">T_att2</th></tr><tr><td>12</td><td>?4</td><td>xBloodPressure</td></tr><tr><td>13</td><td>?5</td><td>xBodyWeight</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance I1Fwd</h3><div><table id="table456" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>G</b></caption><tr><th onclick="sortTable('table456', 0)">ID</th><th onclick="sortTable('table456', 1)">att</th></tr><tr><td>0</td><td>xF</td></tr><tr><td>1</td><td>xM</td></tr></table><table id="table457" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>M</b></caption><tr><th onclick="sortTable('table457', 0)">ID</th><th onclick="sortTable('table457', 1)">g2</th></tr><tr><td>2</td><td>10</td></tr><tr><td>3</td><td>11</td></tr><tr><td>4</td><td>12</td></tr></table><table id="table458" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>O</b></caption><tr><th onclick="sortTable('table458', 0)">ID</th><th onclick="sortTable('table458', 1)">f</th><th onclick="sortTable('table458', 2)">g1</th></tr><tr><td>5</td><td>8</td><td>2</td></tr><tr><td>6</td><td>9</td><td>3</td></tr><tr><td>7</td><td>8</td><td>4</td></tr></table><table id="table459" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>P</b></caption><tr><th onclick="sortTable('table459', 0)">ID</th><th onclick="sortTable('table459', 1)">P_att1</th><th onclick="sortTable('table459', 2)">P_att2</th><th onclick="sortTable('table459', 3)">h</th></tr><tr><td>8</td><td>xPeter</td><td>?0</td><td>1</td></tr><tr><td>9</td><td>xPaul</td><td>?1</td><td>1</td></tr></table><table id="table460" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>T</b></caption><tr><th onclick="sortTable('table460', 0)">ID</th><th onclick="sortTable('table460', 1)">T_att1</th><th onclick="sortTable('table460', 2)">T_att2</th></tr><tr><td>10</td><td>xBloodPressure</td><td>?2</td></tr><tr><td>11</td><td>xHeartRate</td><td>?3</td></tr><tr><td>12</td><td>xBodyWeight</td><td>?4</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance I2</h3><div><table id="table461" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Method</b></caption><tr><th onclick="sortTable('table461', 0)">ID</th><th onclick="sortTable('table461', 1)">g2</th></tr><tr><td>0</td><td>10</td></tr><tr><td>1</td><td>10</td></tr><tr><td>2</td><td>11</td></tr><tr><td>3</td><td>11</td></tr></table><table id="table462" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Observation</b></caption><tr><th onclick="sortTable('table462', 0)">ID</th><th onclick="sortTable('table462', 1)">f</th><th onclick="sortTable('table462', 2)">g1</th></tr><tr><td>4</td><td>8</td><td>1</td></tr><tr><td>5</td><td>9</td><td>0</td></tr><tr><td>6</td><td>8</td><td>0</td></tr><tr><td>7</td><td>9</td><td>3</td></tr></table><table id="table463" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Patient</b></caption><tr><th onclick="sortTable('table463', 0)">ID</th><th onclick="sortTable('table463', 1)">att</th></tr><tr><td>8</td><td>xPete</td></tr><tr><td>9</td><td>xJane</td></tr></table><table id="table464" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Type</b></caption><tr><th onclick="sortTable('table464', 0)">ID</th><th onclick="sortTable('table464', 1)">att</th></tr><tr><td>10</td><td>xBloodPressure</td></tr><tr><td>11</td><td>xBodyWeight</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance I1</h3><div><table id="table465" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Gender</b></caption><tr><th onclick="sortTable('table465', 0)">ID</th><th onclick="sortTable('table465', 1)">att</th></tr><tr><td>0</td><td>xF</td></tr><tr><td>1</td><td>xM</td></tr></table><table id="table466" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>ObsType</b></caption><tr><th onclick="sortTable('table466', 0)">ID</th><th onclick="sortTable('table466', 1)">att</th></tr><tr><td>2</td><td>xBloodPressure</td></tr><tr><td>3</td><td>xHeartRate</td></tr><tr><td>4</td><td>xBodyWeight</td></tr></table><table id="table467" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Observation</b></caption><tr><th onclick="sortTable('table467', 0)">ID</th><th onclick="sortTable('table467', 1)">f</th><th onclick="sortTable('table467', 2)">g</th></tr><tr><td>5</td><td>8</td><td>2</td></tr><tr><td>6</td><td>9</td><td>3</td></tr><tr><td>7</td><td>8</td><td>4</td></tr></table><table id="table468" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>Person</b></caption><tr><th onclick="sortTable('table468', 0)">ID</th><th onclick="sortTable('table468', 1)">att</th><th onclick="sortTable('table468', 2)">h</th></tr><tr><td>8</td><td>xPeter</td><td>1</td></tr><tr><td>9</td><td>xPaul</td><td>1</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance CoProd</h3><div><table id="table469" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>G</b></caption><tr><th onclick="sortTable('table469', 0)">ID</th><th onclick="sortTable('table469', 1)">att</th></tr><tr><td>0</td><td>?0</td></tr><tr><td>1</td><td>?1</td></tr><tr><td>2</td><td>xM</td></tr><tr><td>3</td><td>xF</td></tr></table><table id="table470" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>M</b></caption><tr><th onclick="sortTable('table470', 0)">ID</th><th onclick="sortTable('table470', 1)">g2</th></tr><tr><td>4</td><td>23</td></tr><tr><td>5</td><td>23</td></tr><tr><td>6</td><td>24</td></tr><tr><td>7</td><td>25</td></tr><tr><td>8</td><td>26</td></tr><tr><td>9</td><td>22</td></tr><tr><td>10</td><td>26</td></tr></table><table id="table471" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>O</b></caption><tr><th onclick="sortTable('table471', 0)">ID</th><th onclick="sortTable('table471', 1)">f</th><th onclick="sortTable('table471', 2)">g1</th></tr><tr><td>11</td><td>18</td><td>5</td></tr><tr><td>12</td><td>20</td><td>6</td></tr><tr><td>13</td><td>19</td><td>4</td></tr><tr><td>14</td><td>18</td><td>4</td></tr><tr><td>15</td><td>20</td><td>7</td></tr><tr><td>16</td><td>21</td><td>9</td></tr><tr><td>17</td><td>19</td><td>10</td></tr></table><table id="table472" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>P</b></caption><tr><th onclick="sortTable('table472', 0)">ID</th><th onclick="sortTable('table472', 1)">P_att1</th><th onclick="sortTable('table472', 2)">P_att2</th><th onclick="sortTable('table472', 3)">h</th></tr><tr><td>18</td><td>?2</td><td>xPete</td><td>0</td></tr><tr><td>19</td><td>?3</td><td>xJane</td><td>1</td></tr><tr><td>20</td><td>xPeter</td><td>?4</td><td>2</td></tr><tr><td>21</td><td>xPaul</td><td>?5</td><td>2</td></tr></table><table id="table473" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>T</b></caption><tr><th onclick="sortTable('table473', 0)">ID</th><th onclick="sortTable('table473', 1)">T_att1</th><th onclick="sortTable('table473', 2)">T_att2</th></tr><tr><td>22</td><td>xHeartRate</td><td>?6</td></tr><tr><td>23</td><td>?7</td><td>xBloodPressure</td></tr><tr><td>24</td><td>xBloodPressure</td><td>?8</td></tr><tr><td>25</td><td>xBodyWeight</td><td>?9</td></tr><tr><td>26</td><td>?10</td><td>xBodyWeight</td></tr></table></div><br style="clear:both;"/><hr/><h3>instance E</h3><div><table id="table474" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>G</b></caption><tr><th onclick="sortTable('table474', 0)">ID</th><th onclick="sortTable('table474', 1)">att</th></tr><tr><td>0</td><td>?0</td></tr></table><table id="table475" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>M</b></caption><tr><th onclick="sortTable('table475', 0)">ID</th><th onclick="sortTable('table475', 1)">g2</th></tr></table><table id="table476" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>O</b></caption><tr><th onclick="sortTable('table476', 0)">ID</th><th onclick="sortTable('table476', 1)">f</th><th onclick="sortTable('table476', 2)">g1</th></tr></table><table id="table477" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>P</b></caption><tr><th onclick="sortTable('table477', 0)">ID</th><th onclick="sortTable('table477', 1)">P_att1</th><th onclick="sortTable('table477', 2)">P_att2</th><th onclick="sortTable('table477', 3)">h</th></tr><tr><td>1</td><td>?1</td><td>?2</td><td>0</td></tr></table><table id="table478" style="float: left; border: 1px solid black; padding: 5px; border-collapse: collapse; margin-right:10px" border="1"  cellpadding="3"><caption><b>T</b></caption><tr><th onclick="sortTable('table478', 0)">ID</th><th onclick="sortTable('table478', 1)">T_att1</th><th onclick="sortTable('table478', 2)">T_att2</th></tr><tr><td>2</td><td>?3</td><td>?4</td></tr><tr><td>3</td><td>?5</td><td>?6</td></tr></table></div><br style="clear:both;"/></body></html>